<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
  <script src="semantic/dist/semantic.min.js"></script>

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
    }

    .container{
      margin-top: 10vh;
      margin-left: auto;
      margin-right: auto;  
    }

    .centered {
      text-align: center;
    }

    .red-bubble {
      background-color: #e1e9b7 !important;
    }

    .blue-bubble {
      background-color: #bcd2d0 !important;
    }

  </style>
</head>

<body>
  <div class="container">
    <div class="ui segment">
        <h1 class="ui header centered">
        <%- name %>
        </h1>
        <img src="<%-poster%>" width="100%" />
        <div class="ui medium relaxed list">
          <% episode.messages.forEach( message => { %>
            <% if(message.text) {   %>
            <div class="item <%-message.sender ? (message.sender.name=== mainCharacter ? 'left floated' : 'right floated') : ''%> ">
              <div class="content <%-message.sender ? (message.sender.name=== mainCharacter ? 'left floated' : 'right floated') : ''%>">
                <div class="ui message <%-message.sender ? (message.sender.name=== mainCharacter ? 'red-bubble' : 'blue-bubble') : ''%>">
                  <% if(message.sender){ %>
                    <div class="header">
                      <%- message.sender ? message.sender.name : 'System' %>
                    </div>
                  <%}%>
                  <p class="<%-message.sender ? '' : 'centered'%>">
                    <%- message.text %>
                  </p>
                </div>
              </div>
            </div>
            <% } else {  %>
              <span width='0px' ></span>
          <% } }) %>

        </div>
      </div>
    </div> 
</body>

</html>